<div class="cover-photo"></div>
<div class="info-box">
  <img ng-src="{{ movie.image }}" alt="{{ movie.name }}">
  <div class="stats">
    <p>Director: {{ movie.director }}</p>
    <div class="writers">
      Writers:
      <span ng-repeat="writer in movie.writers">{{ writer }}</span>
    </div>
    <div class="actors">
      Actors:
      <span ng-repeat=" actor in movie.actors">{{ actor }}</span>
    </div>
    <p>Synopsis: {{ movie.synopsis }}</p>
    <div class="genres">
      Genres:
      <span ng-repeat=" genre in movie.genres">{{ genre }}</span>
    </div>
    <p>Runtime: {{ movie.movieLength }} </p>
    <p>Release year: {{ movie.yearReleased }}</p>
    <div class="locations">
      Locations Filmed:
      <span ng-repeat=" location in movie.locationFilmed">{{ location }}</span>
    </div>
  </div>
  <div class="rating-display">
    {{movie.averageRating}}
  </div>
  <div class="buttons-box">
    <button class="button is-rounded" ui-sref="movieEdit({ id: movie._id})">EDIT</button>
    <button class="button is-rounded" ng-click="handleDelete()">DELETE</button>
  </div>
</div>
<div class="review-box">
  <h1 class="title is-1">{{ movie.name }}</h1>
  <h1 class="title is-1"> - Spotted by {{ movie.createdBy.username}}</h1>
  <div class="reviews">
    <div class="review" ng-repeat="review in movie.reviews">
      <h4>{{review.title.toUpperCase()}}</h4>
      <h5>By {{ review.createdBy.username }}</h5>
      <p>{{ review.rating }}</p>
      <span>{{ review.content }}</span>
      <button ng-if="isAuthenticated() && review.user._id === reviewId" class="delete-button" ng-click="deleteReview(review)">x</button>
    </div>
    <div class="review-form">
      <form  ng-show="isAuthenticated()" ng-submit="createReview()">
        <input class="title-input" type="text" ng-model="review.title" placeholder="Review Title" required>
        <textarea type="text" ng-model="review.content" placeholder="Write your review here...."></textarea>
        <input class="rating-input" type="number" ng-model="review.rating" min="1" max="5" placeholder="1" required>
        <button class="button">Add Review</button>
      </form>
    </div>
  </div>
</div>
